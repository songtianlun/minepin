{{ define "content" }}

<div id="l-map" style="margin: 20px auto;height: 300px;"></div>

<script type="text/javascript" src="//api.map.baidu.com/api?type=webgl&v=2.0&ak={{ .BaiduAK }}"></script>
<script type="text/javascript">
  // 百度地图API功能
  function G(id) {
    return document.getElementById(id);
  }

  var map = new BMapGL.Map("l-map");


  // map.centerAndZoom("北京",12);                   // 初始化地图,设置城市和地图级别。
  map.enableScrollWheelZoom(true);
  {{ range .Pins }}
  map.addOverlay(new BMapGL.Marker(new BMapGL.Point({{ .Lng }}, {{ .Lat }})));
  map.centerAndZoom(new BMapGL.Point({{ .Lng }}, {{ .Lat }}), 15);
  {{ end }}
  // map.addOverlay(new BMapGL.Marker(pinPoint));
  // 增加点选事件，实现点选位置
  map.addEventListener('click', function (e) {
    map.clearOverlays()
    map.addOverlay(new BMapGL.Marker(new BMapGL.Point(e.latlng.lng, e.latlng.lat)));
    document.getElementById("longitude").value=e.latlng.lng
    document.getElementById("latitude").value=e.latlng.lat
  });
</script>

{{ end }}